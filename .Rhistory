html_table(tbls[[2]])
html_table(tbls[[2:4]])
html_table(tbls[[2:4]])
html_table(tbls[2:4])
html_table(tbls[2:4], fill = TRUE)
tbls %>%
html_table(tbls[seq(2, 65, 2)], fill = TRUE) %>%
bind_rows()
tbls %>%
html_table(tbls[seq(2, 64, 2)], fill = TRUE) %>%
bind_rows()
2:64
2:64*2
2:32*2
tbls %>%
html_table(tbls[2:32*2], fill = TRUE) %>%
bind_rows()
tbls %>%
html_table(tbls[2:32], fill = TRUE) %>%
bind_rows()
tbls %>%
html_table(tbls[2:4], fill = TRUE) %>%
bind_rows()
typeof(tbls)
tbls %>%
slice(which(row_number() %% 5 == 1))
for (i in  seq(2, 64, 2)) {}
i
print(i)
team$i <- html_table(tbls[[i]], fill = TRUE)
team <- html_table(tbls[[i]], fill = TRUE)
View(team)
for (i in  seq(2, 64, 2)) {
team <- html_table(tbls[[i]], fill = TRUE)
team$i <- i
teams[[i]] <- team
}
teams = list()
for (i in  seq(2, 64, 2)) {
team <- html_table(tbls[[i]], fill = TRUE)
team$i <- i
teams[[i]] <- team
}
View(teams)
teams = list()
for (i in  2:32*2)) {
team <- html_table(tbls[[i]], fill = TRUE)
team$i <- i
teams[[i]] <- team
}
teams = list()
for (i in  2:32*2) {
team <- html_table(tbls[[i]], fill = TRUE)
team$i <- i
teams[[i]] <- team
}
teams <- do.call(rbind, teams)
View(teams)
teams = list()
for (i in  seq(0, 64, 2)) {
team <- html_table(tbls[[i]], fill = TRUE)
team$i <- i
teams[[i]] <- team
}
for (i in  seq(2, 64, 2)) {
team <- html_table(tbls[[i]], fill = TRUE)
team$i <- i
teams[[i]] <- team
}
teams <- do.call(rbind, teams)
source('~/Documents/Projects/R/FIBA-BWC19/fiba19.R', echo=TRUE)
View(teams)
webpage %>%  html_node(., 'h1') %>% html_text()
webpage %>%  html_node(., 'h3') %>% html_text()
webpage %>%  html_node(., 'h3')
webpage %>%  html_nodes(., 'h3') %>% html_text()
webpage %>%  html_nodes(., 'h3')
webpage %>% html_nodes(., 'h3') %>% html_nodes('id')
webpage %>% html_nodes(., 'h3') %>% html_nodes(id)
webpage %>% html_nodes(., 'h3') %>% html_node('id')
webpage %>%  html_nodes(., 'h3')
webpage %>% html_nodes('h3')
webpage %>% html_nodes('h3') %>% html_nodes("mw-hradline")
webpage %>% html_nodes('h3') %>% html_nodes("mw-headline")
webpage %>% html_nodes('h3') %>% html_nodes("mw-headline")
webpage %>% html_nodes(//*[@id="China"])
webpage %>% html_nodes("//*[@id="China"]")
webpage %>% html_nodes(xpath = "//*[@id="China"]")
webpage %>% html_nodes(xpath = "//*[@id=]")
webpage %>% html_nodes(xpath = "//*[@id="a"]")
webpage %>% html_nodes(xpath = "//*[@id]")
webpage %>% html_nodes(xpath = "//*[@id="a"]")
webpage %>% html_nodes(xpath = "//*[@id]")
webpage %>% html_nodes('h3')
webpage %>% html_nodes("h3 > mw-headline")
webpage %>% html_nodes("h3:mw-headline")
webpage %>% html_nodes("h3:.mw-headline")
webpage %>% html_nodes("h3 .mw-headline")
webpage %>% html_nodes("h3 .mw-headline .a")
webpage %>% html_nodes("h3 .mw-headline a")
webpage %>% html_nodes("h3 .mw-headline .id")
webpage %>% html_nodes("h3 .mw-headline #id")
webpage %>% html_nodes("h3 .mw-headline id")
webpage %>% html_nodes("h3 .mw-headline .id")
webpage %>% html_nodes("h3 .mw-headline #id")
webpage %>% html_nodes("h3 .mw-headline p")
webpage %>% html_nodes("h3 .mw-headline")
webpage %>% html_nodes("h3 .mw-headline" id)
webpage %>% html_nodes("h3 .mw-headline id")
webpage %>% html_nodes("h3 .mw-headline")
webpage %>% html_nodes("h3 .mw-headline") %>% xml_attr("value")
webpage %>% html_nodes("h3 .mw-headline") %>% xml_attr("id")
teams = list(webpage %>% html_nodes("h3 .mw-headline") %>% xml_attr("id"))
View(teams)
countries <- webpage %>%
html_nodes("h3 .mw-headline") %>%
xml_attr("id")
countries[1]
countries[2]
countries <- webpage %>%
html_nodes("h3 .mw-headline") %>%
xml_attr("id")
teams = list()
for (i in  seq(2, 64, 2)) {
team <- html_table(tbls[[i]], fill = TRUE)
team$country <- countries[i/2]
teams[[i]] <- team
}
teams <- do.call(rbind, teams)
View(teams)
webpage %>% html_nodes("h3 .mw-headline") %>% xml_attr("value")
webpage %>% html_nodes("h3 .mw-headline") %>% xml_attr("id")
View(teams)
View(teams)
library(janitor)
# clean
teams %>% clean_names()
# clean
teams_clean <-teams %>%
clean_names()
View(teams_clean)
# clean
teams_clean <-teams %>%
clean_names() %>%
separate(age_date_of_birth, c(age, date_of_birth), sep = " - ")
# clean
teams_clean <-teams %>%
clean_names() %>%
separate(age_date_of_birth, c("age", "date_of_birth"), sep = " - ")
View(teams_clean)
# clean
teams_clean <-teams %>%
clean_names() %>%
separate(age_date_of_birth, c("age", "date_of_birth"), sep = " â€“ ")
View(teams_clean)
# clean
teams_clean <-teams %>%
clean_names() %>%
str_extract(age_date_of_birth, "\\d{4}-\\d{2}-\\d{2}")
# clean
teams_clean <-teams %>%
clean_names() %>%
str_extract(age_date_of_birth, "\\d{4}-\\d{2}-\\d{2}")
# clean
teams_clean <-teams %>%
clean_names() %>%
str_extract(age_date_of_birth, "\d{4}-\d{2}-\d{2}")
# clean
teams_clean <-teams %>%
clean_names() %>%
rename(date_of_birth = age_date_of_birth)
View(teams_clean)
# clean
teams_clean <-teams %>%
clean_names() %>%
rename(date_of_birth = age_date_of_birth) %>%
mutate(date_of_birth = str_extract(date_of_birth, "\\d{4}-\\d{2}-\\d{2}"))
View(teams_clean)
# clean
teams_clean <-teams %>%
clean_names() %>%
rename(date_of_birth = age_date_of_birth) %>%
mutate(
date_of_birth = str_extract(date_of_birth, "\\d{4}-\\d{2}-\\d{2}"),
height = str_extract(height, "\\d{1}.\\d{2}")
)
View(teams_clean)
# clean
teams_clean <-teams %>%
clean_names() %>%
rename(date_of_birth = age_date_of_birth, position = pos) %>%
mutate(
date_of_birth = str_extract(date_of_birth, "\\d{4}-\\d{2}-\\d{2}"),
height = str_extract(height, "\\d{1}.\\d{2}")
)
View(teams_clean)
# clean
teams_clean <-teams %>%
clean_names() %>%
rename(
date_of_birth = age_date_of_birth,
position = pos,
number = no
) %>%
mutate(
date_of_birth = str_extract(date_of_birth, "\\d{4}-\\d{2}-\\d{2}"),
height = str_extract(height, "\\d{1}.\\d{2}")
)
View(teams_clean)
# read in countries list
countries <- webpage %>%
html_nodes("h3 .mw-headline") %>%
xml_attr("id") %>%
str_replace(., "_", " ")
# read in rosters
teams = list()
for (i in  seq(2, 64, 2)) {
team <- html_table(tbls[[i]], fill = TRUE)
team$country <- countries[i/2]
teams[[i]] <- team
}
teams <- do.call(rbind, teams)
# clean
teams_clean <-teams %>%
clean_names() %>%
rename(
date_of_birth = age_date_of_birth,
position = pos,
number = no
) %>%
mutate(
date_of_birth = str_extract(date_of_birth, "\\d{4}-\\d{2}-\\d{2}"),
height = str_extract(height, "\\d{1}.\\d{2}")
)
View(teams_clean)
# clean
teams_clean <-teams %>%
clean_names() %>%
rename(
date_of_birth = age_date_of_birth,
position = pos,
number = no
) %>%
mutate(
date_of_birth = str_extract(date_of_birth, "\\d{4}-\\d{2}-\\d{2}"),
height = str_extract(height, "\\d{1}.\\d{2}")
) %>%
select(country, everything())
View(teams)
View(teams_clean)
typeof(teams_clean)
typeof(teams_clean$date_of_birth)
typeof(teams_clean$height)
data(mtcars)
force(mtcars)
typeof(mtcars$mpg)
# clean
teams_clean <-teams %>%
clean_names() %>%
rename(
date_of_birth = age_date_of_birth,
position = pos,
number = no
) %>%
mutate(
date_of_birth = as.Date(str_extract(date_of_birth, "\\d{4}-\\d{2}-\\d{2}")),
height = as.numeric(str_extract(height, "\\d{1}.\\d{2}"))
) %>%
select(country, everything())
View(teams)
View(teams_clean)
typeof(teams_clean$height)
typeof(teams_clean$date_of_birth)
# clean
teams_clean <-teams %>%
clean_names() %>%
rename(
date_of_birth = age_date_of_birth,
position = pos,
number = no
) %>%
mutate(
date_of_birth = as.Date(str_extract(date_of_birth, "\\d{4}-\\d{2}-\\d{2}")),
height = as.numeric(str_extract(height, "\\d{1}.\\d{2}")),
position = as.numeric(position)
) %>%
select(country, everything())
View(teams_clean)
# clean
teams_clean <-teams %>%
clean_names() %>%
rename(
date_of_birth = age_date_of_birth,
position = pos,
number = no
) %>%
mutate(
date_of_birth = as.Date(str_extract(date_of_birth, "\\d{4}-\\d{2}-\\d{2}")),
height = as.numeric(str_extract(height, "\\d{1}.\\d{2}")),
number = as.numeric(number)
) %>%
select(country, everything())
View(teams_clean)
# clean
teams_clean <-teams %>%
clean_names() %>%
rename(
position = pos,
number = no,
date_of_birth = age_date_of_birth,
club_country = ctr
) %>%
mutate(
date_of_birth = as.Date(str_extract(date_of_birth, "\\d{4}-\\d{2}-\\d{2}")),
height = as.numeric(str_extract(height, "\\d{1}.\\d{2}")),
number = as.numeric(number)
) %>%
select(country, everything())
write_csv(teams, "table.csv")
write_csv(teams, "FIBA-WBC19-teams.csv")
write_csv(teams_clean, "FIBA-WBC19-teams.csv")
library(here)
source('~/Documents/Projects/R/FIBA-BWC19/scrape.R', echo=TRUE)
write_csv(teams_clean, here("data", "FIBA-WBC19-teams.csv"))
View(teams_clean)
# clean
teams_clean <-teams %>%
clean_names() %>%
rename(
position = pos,
number = no,
date_of_birth = age_date_of_birth,
club_country = ctr
) %>%
# extract dob, height and change type
mutate(
date_of_birth = as.Date(str_extract(date_of_birth, "\\d{4}-\\d{2}-\\d{2}")),
height = as.numeric(str_extract(height, "\\d{1}.\\d{2}")),
number = as.numeric(number)
) %>%
extract(name, "captain", "\(C\)") %>%
# move country column to beginning
select(country, everything())
# clean
teams_clean <-teams %>%
clean_names() %>%
rename(
position = pos,
number = no,
date_of_birth = age_date_of_birth,
club_country = ctr
) %>%
# extract dob, height and change type
mutate(
date_of_birth = as.Date(str_extract(date_of_birth, "\\d{4}-\\d{2}-\\d{2}")),
height = as.numeric(str_extract(height, "\\d{1}.\\d{2}")),
number = as.numeric(number)
) %>%
extract(name, "captain", "\(C\)") %>%
# move country column to beginning
select(country, everything())
teams_clean <-teams %>%
clean_names() %>%
rename(
position = pos,
number = no,
date_of_birth = age_date_of_birth,
club_country = ctr
) %>%
# extract dob, height and change type
mutate(
date_of_birth = as.Date(str_extract(date_of_birth, "\\d{4}-\\d{2}-\\d{2}")),
height = as.numeric(str_extract(height, "\\d{1}.\\d{2}")),
number = as.numeric(number)
) %>%
extract(name, "captain", "\(C\)")
# clean
teams_clean <-teams %>%
clean_names() %>%
rename(
position = pos,
number = no,
date_of_birth = age_date_of_birth,
club_country = ctr
) %>%
# extract dob, height and change type
mutate(
date_of_birth = as.Date(str_extract(date_of_birth, "\\d{4}-\\d{2}-\\d{2}")),
height = as.numeric(str_extract(height, "\\d{1}.\\d{2}")),
number = as.numeric(number)
) %>%
extract(name, "captain", "\\(C\\)") %>%
# move country column to beginning
select(country, everything())
# clean
teams_clean <-teams %>%
clean_names() %>%
rename(
position = pos,
number = no,
date_of_birth = age_date_of_birth,
club_country = ctr
) %>%
# extract dob, height and change type
mutate(
date_of_birth = as.Date(str_extract(date_of_birth, "\\d{4}-\\d{2}-\\d{2}")),
height = as.numeric(str_extract(height, "\\d{1}.\\d{2}")),
number = as.numeric(number)
) %>%
extract(name, captain, " \\(C\\)") %>%
# move country column to beginning
select(country, everything())
, " \\(C\\)") %>%
# move country column to beginning
select(country, everything())
# clean
teams_clean <-teams %>%
clean_names() %>%
rename(
position = pos,
number = no,
date_of_birth = age_date_of_birth,
club_country = ctr
) %>%
# extract dob, height and change type
mutate(
date_of_birth = as.Date(str_extract(date_of_birth, "\\d{4}-\\d{2}-\\d{2}")),
height = as.numeric(str_extract(height, "\\d{1}.\\d{2}")),
number = as.numeric(number)
) %>%
extract(name, "captain", " \\(C\\)")
# clean
teams_clean <-teams %>%
clean_names() %>%
rename(
position = pos,
number = no,
date_of_birth = age_date_of_birth,
club_country = ctr
) %>%
# extract dob, height and change type
mutate(
date_of_birth = as.Date(str_extract(date_of_birth, "\\d{4}-\\d{2}-\\d{2}")),
height = as.numeric(str_extract(height, "\\d{1}.\\d{2}")),
number = as.numeric(number)
) %>%
extract(name, into = "captain", " \\(C\\)")
# clean
teams_clean <-teams %>%
clean_names() %>%
rename(
position = pos,
number = no,
date_of_birth = age_date_of_birth,
club_country = ctr
) %>%
# extract dob, height and change type
mutate(
date_of_birth = as.Date(str_extract(date_of_birth, "\\d{4}-\\d{2}-\\d{2}")),
height = as.numeric(str_extract(height, "\\d{1}.\\d{2}")),
number = as.numeric(number)
) %>%
extract(name, into = c("captain"), " \\(C\\)")
# clean
teams_clean <-teams %>%
clean_names() %>%
rename(
position = pos,
number = no,
date_of_birth = age_date_of_birth,
club_country = ctr
) %>%
# extract dob, height and change type
mutate(
date_of_birth = as.Date(str_extract(date_of_birth, "\\d{4}-\\d{2}-\\d{2}")),
height = as.numeric(str_extract(height, "\\d{1}.\\d{2}")),
number = as.numeric(number)
) %>%
extract(name, "captain", " \\(C\\)", remove = FALSE) %>%
# move country column to beginning
select(country, everything())
source("height.R")
source("height.R")
source("height.R")
source("height.R")
source("height.R")
source("height.R")
source("height.R")
source("height.R")
source("height.R")
source("height.R")
source("height.R")
source("height.R")
source("height.R")
source("height.R")
source("height.R")
source("height.R")
source("height.R")
source("height.R")
source("height.R")
source("height.R")
source("height.R")
source("height.R")
source("height.R")
source("height.R")
source("height.R")
source("height.R")
source("height.R")
source("R/height.R")
source("R/height.R")
source("R/height.R")
q()
